{"name":"Amountinword","tagline":"数字金额转换成繁体","body":"描述：\r\n<p>1.须要JQUERY版本：1.3.*或以上\r\n2.整数支持到千亿，小数支持到厘\r\n3.仅对中文进行支持</p>\r\n配置项:\r\n<p>\r\nneedinitdisplay:false/true,初始化时如果有值是否同步显示到指定的域，默认为false,当为TRUE，且绑定的域有值，指定的目标域存在时，将目标域显示出转换后的数据\r\nforcefit:true/false,是否强制用户输入正确的金额格式,默认为真\r\nvalues：[\"零\", \"壹\", \"贰\", \"叁\", \"肆\", \"伍\", \"陆\", \"柒\", \"捌\", \"玖\"],用户可以自己定制大写内容\r\ntargets：[{用户必须指定目标域，\r\n\t\ttargetid:'',目标域的ID，不包括#\r\n\t\ttype:'',目标类型：，div,input,textarea\r\n\t\tdisplaymod:''显示模式：大写:words,千分制:thousands\r\n\t},{\r\n\t\t\r\n\t}\r\n\r\n\t],\r\n\r\n</p>\r\n\r\n\r\n用法：\r\n引入JQUERY最新版本：\r\n<pre lang='html'>\r\n<script src=\"http://www.google.com/jsapi\"></script>\r\n<script>\r\n  // Load jQuery\r\n  google.load(\"jquery\", \"1.3.2\");\r\n</script>\r\n</pre>\r\n引入插件：\r\n<pre lang='html'>\r\n<script type='text/javascript' src='../jQuery.amountinwords.js' charset='gb2312'></script>\r\n</pre>\r\n\r\n例子：\r\n<p>1.强制输入正确的金额格式：xxxxxxxxxxxxxx.xxx(x代表数字)</p>\r\n\r\n<pre lang='javascript'>\r\n$(\"#id\").amountinwords({\r\n\ttargets:[{\r\n\t\t\ttargetid:'wordsresult',\r\n\t\t\ttype:'div',\r\n\t\t\tdisplaymode:'words'\r\n\t\t}],\r\n\tforcefit:true\r\n});\r\n</pre>\r\n<p>2.金额大写显示：</p>\r\n<pre lang='javascript'>\r\n$(\"#id\").amountinwords({\r\n\ttargets:[{\r\n\t\t\ttargetid:'wordsresult',\r\n\t\t\ttype:'div',\r\n\t\t\tdisplaymode:'words'\r\n\t\t}]\r\n});\r\n</pre>\r\n\r\n<p>2.千分制形式显示金额：</p>\r\n<pre lang='javascript'>\r\n$(\"#id\").amountinwords({\r\n\ttargets:[{\r\n\t\t\ttargetid:'wordsresult',\r\n\t\t\ttype:'div',\r\n\t\t\tdisplaymode:'words'\r\n\t\t}]\r\n});\r\n</pre>\r\n<p>4.多目标域显示结果:</p>\r\n<pre lang='javascript'>\r\n$(\"#id\").amountinwords({\r\n\ttargets:[{\r\n\t\t\ttargetid:'wordsresult',\r\n\t\t\ttype:'div',\r\n\t\t\tdisplaymode:'words'\r\n\t\t},{\r\n\t\t\ttargetid:'thousandsresult',\r\n\t\t\ttype:'input',\r\n\t\t\tdisplaymode:'thousands'\r\n\t\t}]\r\n\tforcefit:true,\r\n\tneedinitdisplay:true,\r\n\t\r\n});\r\n</pre>\r\nHTML部分代码：\r\n<pre lang='html'>\r\n<input type=\"text\" name=\"orignamounts\" value=\"32344450.03\" id=\"orignamounts\" />\r\n<input type=\"text\" name=\"thousandsresult\" value=\"\" id=\"thousandsresult\" />\r\n<div id=\"wordsresult\"></div>\r\n</pre>\r\n注意：\r\n<p>1.目前只支持到12位数字，即千亿;正打算开发支持更大的数据量</p>\r\n<p>2.仅支持中文金额</p>\r\n插件代码：\r\n<pre lang='javascript' >\r\n/***\r\n*\r\n*须要JQUERY版本：1.3.*或以上\r\n*\r\n*\r\n*\r\n*\r\n*\r\n*用法：\r\n*引入插件：<script type='text/javascript' src='../jQuery.amountinwords.js' charset='gb2312'></script>\r\n*needinitdisplay:false/true,初始化时如果有值是否同步显示到指定的域，默认为false,当为TRUE，且绑定的域有值，指定的目标域存在时，将目标域显示出转换后的数据\r\n*forcefit:true/false,是否强制用户输入正确的金额格式,默认为真\r\n*values：[\"零\", \"壹\", \"贰\", \"叁\", \"肆\", \"伍\", \"陆\", \"柒\", \"捌\", \"玖\"],用户可以自己定制大写内容\r\n*targets：[{用户必须指定目标域，\r\n*\t\ttargetid:'',目标域的ID，不包括#\r\n*\t\ttype:'',目标类型：，div,input,textarea\r\n*\t\tdisplaymod:''显示模式：大写:words,千分制:thousands\r\n*\t},{\r\n*\t\t\r\n*\t}\r\n*\r\n*\t],\r\n*\r\n*\r\n*例子：\r\n*\r\n*$(\"#id\").amountinwords({\r\n*\ttargets:[{\r\n*\t\t\ttargetid:'wordsresult',\r\n*\t\t\ttype:'div',\r\n*\t\t\tdisplaymode:'words'\r\n*\t\t},{\r\n*\t\t\ttargetid:'thousandsresult',\r\n*\t\t\ttype:'input',\r\n*\t\t\tdisplaymode:'thousands'\r\n*\t\t}]\r\n*\tforcefit:true,\r\n*\tneedinitdisplay:true,\r\n*\t\r\n*});\r\n*HTML部分代码：\r\n*<input type=\"text\" name=\"orignamounts\" value=\"32344450.03\" id=\"orignamounts\" />\r\n*<input type=\"text\" name=\"thousandsresult\" value=\"\" id=\"thousandsresult\" />\r\n*<div id=\"wordsresult\"></div>\r\n*\r\n*注意：\r\n*目前只支持到12位数字，即千亿;正打算开发支持更大的数据量\r\n*\r\n*\r\n*\r\n*\r\n*\r\n*\r\n*\r\n*\r\n*\r\n*\r\n*\r\n*\r\n*\r\n*\r\n****/\r\n\r\n(function($) {\r\n\t$.extend($.fn, {\r\n\t\tamountinwords: function(config) {\r\n\t\t\tconfig = $.extend({},\r\n\t\t\t{\r\n\t\t\t\tneedinitdisplay: false,\r\n\t\t\t\tforcefit: true,\r\n\t\t\t\tdigits: [\"\", \"拾\", \"佰\", \"仟\"],\r\n\t\t\t\tvalues: [\"零\", \"壹\", \"贰\", \"叁\", \"肆\", \"伍\", \"陆\", \"柒\", \"捌\", \"玖\"],\r\n\t\t\t\tadigits: [\"圆\", \"万\", \"亿\"],\r\n\t\t\t\tmindigits: [\"厘\", \"分\", \"角\"],\r\n\t\t\t\ttargets: '' //转换后显示到指定的域，必须为INPUT,TEXTAREA等。传进来的对像必须含有targetid,type(div,input,textarea),displaymode(words,thousands)\r\n\t\t\t},\r\n\t\t\tconfig);\r\n\t\t\tif (config.needinitdisplay && !isNaN($(this).val()) && ($(this).val())) {\r\n\t\t\t\tdisplayresult($(this).val());\r\n\t\t\t}\r\n\t\t\tfunction displayresult(amount) {\r\n\t\t\t\tvar resultcaches = new Array();\r\n\t\t\t\t$(config.targets).each(function(i, n) {\r\n\t\t\t\t\tif (n.displaymode == 'words') {\r\n\t\t\t\t\t\tif (!resultcaches['words']) {\r\n\t\t\t\t\t\t\tvar _words = getamountinwords(amount);\r\n\t\t\t\t\t\t\tresultcaches['words'] = _words;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (n.type == 'div') {\r\n\t\t\t\t\t\t\t$('#' + n.targetid).text(resultcaches['words']);\r\n\t\t\t\t\t\t} else if (n.type == 'input' || n.type == 'textarea') {\r\n\t\t\t\t\t\t\t$('#' + n.targetid).val(resultcaches['words']);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (n.displaymode == 'thousands') {\r\n\t\t\t\t\t\tif (!resultcaches['thousands']) {\r\n\t\t\t\t\t\t\tvar _thousands = getamountinthousands(amount);\r\n\t\t\t\t\t\t\tresultcaches['thousands'] = _thousands;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (n.type == 'div') {\r\n\t\t\t\t\t\t\t$('#' + n.targetid).text(resultcaches['thousands']);\r\n\t\t\t\t\t\t} else if (n.type == 'input' || n.type == 'textarea') {\r\n\t\t\t\t\t\t\t$('#' + n.targetid).val(resultcaches['thousands']);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tfunction getamountinthousands(amount) {\r\n\t\t\t\tvar txt = amount.split(\".\");\r\n\t\t\t\twhile (/\\d{4}(,|$)/.test(txt[0])) txt[0] = txt[0].replace(/(\\d)(\\d{3}(,|$))/, \"$1,$2\");\r\n\t\t\t\tvar _result = txt[0] + (txt.length > 1 ? \".\" + txt[1] : \"\");\r\n\t\t\t\treturn _result;\r\n\t\t\t}\r\n\t\t\t$(this).keyup(function() {\r\n\t\t\t\tvar amount = this.value;\r\n\t\t\t\tif (config.forcefit) {\r\n\t\t\t\t\tamount = amount.replace(/[^\\d\\.]/g, \"\").replace(/(\\.\\d{3}).+$/, \"$1\");\r\n\t\t\t\t\tthis.value = amount;\r\n\t\t\t\t}\r\n\t\t\t\tdisplayresult(amount);\r\n\r\n\t\t\t});\r\n\t\t\tfunction getamountinwords(amount) {\r\n\t\t\t\tif (isNaN(amount)) return \"错误的数据格式\";\r\n\t\t\t\tvar number = Math.round(amount * 1000) / 1000;\r\n\t\t\t\tnumber = number.toString(10).split('.');\r\n\t\t\t\tvar integer = number[0];\r\n\t\t\t\tvar len = integer.length;\r\n\t\t\t\tif (len > 12) return \"数值超出范围！支持的最大数值为 999999999999.99\";\r\n\r\n\t\t\t\tvar num = integer.split('');\r\n\t\t\t\tvar dsl = num.length - 1;\r\n\t\t\t\tvar _result = \"\";\r\n\t\t\t\tvar _vi = 0;\r\n\t\t\t\tfor (var i = 0; i <= (dsl > 12 ? 12 : dsl); i += 4) {\r\n\r\n\t\t\t\t\tvar _t = integer.slice( - i - 4, len - i);\r\n\t\t\t\t\tvar _ts = _t.split('');\r\n\t\t\t\t\tvar _tslength = _ts.length - 1;\r\n\t\t\t\t\tvar _tresult = '';\r\n\t\t\t\t\tfor (var _i = 0; _i <= _tslength; _i++) {\r\n\t\t\t\t\t\t_tresult += config.values[parseInt(_ts[_i])] + (_ts[_i] != 0 ? config.digits[_tslength - _i] : '');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_tresult = _tresult.replace(/零+$/, \"\").replace(/零{2,}/, \"零\");\r\n\r\n\t\t\t\t\t_result = _tresult + ((_t != \"0000\" || _vi == 0) ? config.adigits[_vi] : \"\") + _result;\r\n\t\t\t\t\t_vi++;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//小数点后面处理\r\n\t\t\t\tif (number.length == 2) {\r\n\t\t\t\t\tvar cok = number[1].split('');\r\n\t\t\t\t\tvar _coklength = cok.length - 1;\r\n\t\t\t\t\tvar _tresult = '';\r\n\t\t\t\t\tfor (var i = 0; i <= _coklength; i++) {\r\n\t\t\t\t\t\t_tresult += config.values[parseInt(cok[i])] + (cok[i] != 0 ? config.mindigits[config.mindigits.length - 1 - i] : '');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_tresult = _tresult.replace(/零{2,}/, \"零\");\r\n\t\t\t\t\t_result += _tresult;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn _result;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tinit: function(obj) {\r\n\t\t\t\t\tif (isNaN($(this).val()) && ($(this).val() != '')) {\r\n\t\t\t\t\t\talert(this.value);\r\n\t\t\t\t\t\tdisplayresult($(this).val());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n})(jQuery);\r\n\r\n</pre>","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}